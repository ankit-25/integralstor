{% extends 'storage_base.html' %}
{%block tab_header %}
Schedule  ZFS pool/dataset snapshots
{%endblock%}

{% block inside_content %}
<br><br>

{{conf_message}}

<form id="schedule_form" name="schedule_form" action="/schedule_zfs_snapshot/" method="post">
            <table class="table" style="width:800px">
            <tr>
              <td>
                <label for="id_target">Target :</label>
              </td>
              <td>
                  <select name="target" id="target_select" class="form-control">
                  {% for choice in form.target.field.choices %}
                    <option value="{{choice.0}}" {%if choice.0 == form.initial.target %} selected="selected"{%endif%}>{{choice.1}}</option>
                  {%endfor%}
                  </select>
<script>
    $(function(){
      // bind change event to select
      $('#target_select').on('change', function () {
          var url = "/schedule_zfs_snapshot?target="+$(this).val(); // get selected value
          if (url) { // require a URL
              window.location = url; // redirect
          }
          return false;
      });
    });
</script>
              </td>
              <td>
            {{ form.target.errors }}
              </td>
            </tr>
            <tr>
              <td>
                <label>Snapshot every 15 minutes</label>
              </td>
              <td>
                {{form.frequent}}
              </td>
              <td>
                {{form.frequent.errors}}
              </td>
            </tr>
            <tr>
              <td>
                <label>Hourly snapshots</label>
              </td>
              <td>
                {{form.hourly}}
              </td>
              <td>
                {{form.hourly.errors}}
              </td>
            </tr>
            <tr>
              <td>
                <label>Daily snapshots </label>
              </td>
              <td>
                {{form.daily}}
              </td>
              <td>
                {{form.daily.errors}}
              </td>
            </tr>
            <tr>
              <td>
                <label>Weekly snapshots</label>
              </td>
              <td>
                {{form.weekly}}
              </td>
              <td>
                {{form.weekly.errors}}
              </td>
            </tr>
            <tr>
              <td>
                <label>Monthly snapshots</label>
              </td>
              <td>
                {{form.monthly}}
              </td>
              <td>
                {{form.monthly.errors}}
              </td>
            </tr>
            </table>
        <a href="/view_zfs_snapshots" role="button" class="btn btn-default"> Cancel</a>&nbsp;&nbsp;
        <button type="submit" class="btn btn-primary">Save</button>
</form>

{%endblock%}
{%block help_header%}
Schedule ZFS snapshots
{%endblock%}
{%block help_body%}
<p>Use this screen to schedule ZFS snapshots for a particular pool/dataset. The settings will take effect upon saving this information.</p>
{%endblock%}

{% block tab_active %}
  <script>
   make_tab_active("view_zfs_snapshots_tab")
  </script>
{% endblock %}
