{% extends 'dashboard_base.html' %}
{%block tab_header %}
Hard drives status
{%endblock%}
{% block inside_content %}
<br><br>

      <img src="/static/images/diskmap1.png" width="900px;" class="img-responsive" />
      <span class="disk-center" id="{{disk_pos.1}}"><strong>{{disk_pos.1}}</strong></span>
      <span class="disk-center" id="{{disk_pos.2}}"><strong>{{disk_pos.2}}</strong></span>
      <span class="disk-center" id="{{disk_pos.3}}"><strong>{{disk_pos.3}}</strong></span>
      <span class="disk-center" id="{{disk_pos.4}}"><strong>{{disk_pos.4}}</strong></span>
<br><br>
<table class="table table-bordered table-hover table-responsive" style="width:800px">
<thead>
<th >
Disk serial number
</th>
<th>
S.M.A.R.T status
</th>
<th>
Disk replacement
</th>
</thead>
{%for sn, disk in disk_status.items %}
{%if disk.boot_device %}
<tr>
<td>
{{sn}}  (OS disk) 
</td>
<td>
{{disk.status}} &nbsp;&nbsp;
{%if disk.status == 'PASSED'%}
<i class="fa fa-check-circle green fa-2x"></i>
{%else%}
<i class="fa fa-remove red fa-2x"></i>
{%endif%}
</td>
<td>
&nbsp;
</td>
</tr>
{%endif%}
{%endfor%}
{%for sn, disk in disk_status.items %}
{%if not disk.boot_device %}
<tr>
<td>
{{sn}}  (Data disk) 
</td>
<td>
{{disk.status}} &nbsp;&nbsp;
{%if disk.status == 'PASSED'%}
<i class="fa fa-check-circle green fa-2x"></i>
{%else%}
<i class="fa fa-remove red fa-2x"></i>
{%endif%}
</td>
<td>
{%if disk.status != 'PASSED'%}
      {%if disk.pool%}
      <form method="POST" action="/replace_disk/">
        <input type="hidden" name="node" value="{{node_name}}">
        <input type="hidden" name="serial_number" value="{{sn}}">
        <input type="hidden" name="step" value="offline_disk">
          <button type="submit" class="btn btn-primary" onClick ="$('#processing').modal('show');"> Replace (swap out) this disk </button>
      </form>
      {%else%}
        <button  class="btn btn-primary" onClick ="alert('This disk is not part of any ZFS pool so you can go ahead and replace it safely');"> Replace (swap out) this disk </button>
      {%endif%}
{%else%}
Healthy disk. No replacement necessary.
{%endif%}
</td>
</tr>
{%endif%}
{%endfor%}
</table>
{% endblock %}


{% block tab_active %}
  <script>
   make_tab_active("disks_tab")
  </script>
{% endblock%}



