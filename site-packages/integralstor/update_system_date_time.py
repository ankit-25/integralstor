from integralstor_utils import command

def update_system_date_time(date, time):
    try:
	if not time == None:
            cmd = 'date -s %s' %time
            output, err = command.get_command_output(cmd)
            if err:
                raise Exception(err)
        if not date == None:
            date = date.split("/")
            date = date[2] + "-" + date[0] + "-" + date[1]
            output_time, err = command.get_command_output("date +%T")
            if err:
                raise Exception(err)
            cmd = 'date -s "%s %s"' %(date, output_time[0])
            output, err = command.get_command_output(cmd)
            if err:
                raise Exception(err)
        cmd = "hwclock -w"
        output, err = command.get_command_output(cmd)
        if err:
            raise Exception(err)
    except Exception, e:
        return None, str(e)
    else:
        return True, None

